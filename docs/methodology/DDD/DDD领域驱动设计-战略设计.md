## 领域建模简介

### 为什么要应用领域建模

日益复杂的需求、以复杂应对复杂，才能抽象出系统元素以及一般规则。

DDD的时间成本比较平缓，在复杂度到达一定程度后，时间成本会比较有优势。直线型VS指数型。

与传统设计一脉相承。

![]()

![image-20210712153238563](C:\Users\lwx639077\AppData\Roaming\Typora\typora-user-images\image-20210712153238563.png)

![image-20210712153733026](C:\Users\lwx639077\AppData\Roaming\Typora\typora-user-images\image-20210712153733026.png)





### 简介

## 战略设计

### 方法介绍

事件风暴（EventStorming）：事件驱动建模技术，一种快速的设计技术，让领域专家与开发人员都可以快节奏的参与到这个设计过程中。聚焦业务和业务流程，而非名词概念和数据。

- 强参与感方法。业务和开发人员都平台的参与，有共同的语言，共同参与。
- 聚焦业务时间和业务流程，而不是类和数据库。
- 高度视觉化，不涉及代码。每个人都平等参与到设计过程中。
- 实施快，投入低。4W行代码，几个小时就可以确定。
- 团队更深入业务。
- 尽快尽早的在模型和认知中识别出问题，扫除误解。
- 宏观的建模和代码级设计都可以使用事件风暴。

### 识别业务流

- 梳理方法：聚焦一个业务场景，以时间线为主线，向前向后发散，不断范围来完善整个业务流。具体如下：

1. 梳理该系统/模块的外部依赖关系
2. 选择一个依赖关系针对该系统的应用场景，以时间线为主线，梳理该系统应该用哪些步骤（业务流节点）来完成这个场景任务
3. 通过不断的向前向后反问发散，补全整个业务流。例如：该业务流触发的业务流是什么？触发该业务流的前一个业务流是什么？

- 注意事项：
  - 从用户的角度出发，而不是通实现。
  - 区分业务逻辑流和业务流。业务逻辑流是业务处理过程，既代码逻辑可视化。 业务流：任务所需要的不同节点的连接，节点分为人工节点和自动节点。

实例：项目管理业务流

创建产品 -> 创建待办项 -> 创建任务 -> 估算任务量 -> 指派责任人 -> 发布计划 -> 提交冲刺

*在多彩设计中，使用灰色卡片展示*

### 提取领域事件和业务规则

- **什么是领域事件**

  领域专家所关心的发生在领域中的一些事情，在同一个/不同领域中希望被其他部分知道并产生后续动作的时间。**领域事件对业务有价值，有助于形成完整的业务闭环。**

  领域事件的梳理可以反向验证业务流及业务流节点的正确性。

- **如何从业务中识别领域事件**

  从业务流节点的需求描述模型中提取，如：什么场景下，谁使用什么做了什么，采用什么算法，**产生了什么结果（领域事件）**，影响了什么。

- **如何描述**

  “产生事件的对象名称 + 完成的动作的过去式”的形式。例如：订单的发货的领域事件：订单已发货

  *使用红色卡变展示*

- **业务规则**

  - 是对分支条件或者复杂业务规则的抽象，目的是通过降低分支复杂度聚焦主要业务流程，如： 事件：订单支付已超时->规则：支付超时规则
  - 使用规则抽象分支条件或者复杂的规则细节，通过抽象降低分支复杂度，规则以“XXX规则”的名词形式进行命名
  - 规则的适用场景：开启了一条分支事件流；简化复杂但对主流程影响不大的规则判断
  - 规则分类：全局规则、交互规则和内禀规则
  - 安全质量属性等需要结合实际业务场景与业务流分解到每个业务流节点的业务规则中。

  *使用蓝色卡变展示*

### 提取决策命令

### 提取聚合

### 划分界限上下文

### 确定界限上下文依赖

### 划分子域

## 建模工具

### CloudModeling

